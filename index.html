<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="google-adsense-account" content="ca-pub-9998374393458024">
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <meta name="description" content="Stay up to date with the latest news headlines and trending stories around the world." />
  <title>The News Today</title>

  <!-- Performance Hints -->
  <link rel="preconnect" href="https://gnews.io" />
  <link rel="preconnect" href="https://newsapi.org" />
  <meta http-equiv="Cache-Control" content="max-age=86400, public" />

  <!-- Google AdSense -->
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-9998374393458024" crossorigin="anonymous"></script>

  <style>
    :root{
      --bg:#f5f7fb; --card:#fff; --muted:#636f83; --accent:#0b74de;
      font-family: Inter, system-ui, sans-serif;
    }
    body{margin:0; background:var(--bg); color:#0b1020;}
    header{background:#fff; box-shadow:0 2px 8px rgba(0,0,0,0.05); padding:12px 20px; position:sticky; top:0; z-index:100;}
    nav{display:flex; justify-content:space-between; align-items:center; flex-wrap:wrap; max-width:1100px; margin:auto;}
    h1{margin:0; font-size:22px; color:var(--accent);}
    ul{list-style:none; display:flex; gap:16px; margin:0; padding:0;}
    nav a{text-decoration:none; color:var(--muted); font-weight:500;}
    nav a:hover{color:var(--accent);}
    
    .wrap{max-width:1100px; margin:auto; padding:20px;}
    .controls{display:flex; flex-wrap:wrap; gap:8px; margin-bottom:20px;}
    select,input,button{padding:8px 10px; border-radius:8px; border:1px solid #e3e8ef;}
    button{background:var(--accent); color:white; border:0; cursor:pointer;}
    .loader{color:var(--muted); margin-bottom:12px;}
    .grid{display:grid; grid-template-columns:repeat(auto-fill,minmax(280px,1fr)); gap:16px;}
    .card{background:var(--card); border-radius:12px; overflow:hidden; box-shadow:0 6px 18px rgba(15,30,60,0.06); display:flex; flex-direction:column; transition:transform .2s;}
    .card:hover{transform:translateY(-4px);}
    .thumb{width:100%; height:160px; object-fit:cover; background:#ddd;}
    .content{padding:14px; flex:1;}
    .title{font-size:16px; font-weight:600;}
    .desc{font-size:14px; color:var(--muted);}
    .card-footer{display:flex; justify-content:space-between; align-items:center; font-size:12px; color:var(--muted);}
    .small-btn{padding:6px 10px; border-radius:8px; border:0; background:#eef6ff; color:var(--accent); text-decoration:none;}
    footer{text-align:center; padding:20px; font-size:13px; color:var(--muted);}
    footer a{color:var(--accent); text-decoration:none;}
    footer a:hover{text-decoration:underline;}
    #privacyModal{display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.6); justify-content:center; align-items:center;}
    #privacyModal .content{background:white; padding:20px; border-radius:10px; max-width:600px;}
    #privacyModal button{background:var(--accent); color:#fff; border:0; border-radius:8px; padding:8px 16px; cursor:pointer;}
    @media (max-width:600px){ul{flex-direction:column; align-items:flex-start; gap:8px;}}
  </style>
</head>
<body>
  <header>
    <nav>
      <h1>The News Today</h1>
      <ul>
        <li><a href="#" id="homeLink">Home</a></li>
        <li><a href="#" id="aboutLink">About</a></li>
        <li><a href="#" id="privacyLink">Privacy Policy</a></li>
        <li><a href="#" id="contactLink">Contact</a></li>
      </ul>
    </nav>
  </header>

  <main class="wrap">
    <div class="controls">
      <select id="country">
        <option value="">All Countries</option>
        <option value="us">United States</option>
        <option value="gb">United Kingdom</option>
        <option value="ca">Canada</option>
        <option value="au">Australia</option>
      </select>
      <input id="q" placeholder="Search keyword..." />
      <button id="fetchBtn">Load</button>
    </div>

    <div id="status" class="loader">Ready</div>
    <div id="error" class="error" style="display:none; color:red;"></div>
    <div id="grid" class="grid"></div>
  </main>

  <footer>
    &copy; 2025 <strong>Vanny</strong> | <a href="#" id="privacyFooter">Privacy Policy</a>
  </footer>

  <!-- Privacy Modal -->
  <div id="privacyModal">
    <div class="content">
      <h2>Privacy Policy</h2>
      <p>Your privacy matters to us. This website does not collect personal data directly. Third-party services like Google AdSense may use cookies to display relevant ads.</p>
      <p>No sensitive data (like passwords, names, or emails) is stored or sold. Basic analytics (like browser type and visit count) may be collected to improve performance.</p>
      <p>For details, see <a href="https://policies.google.com/privacy" target="_blank">Google’s Privacy Policy</a>.</p>
      <button id="closePrivacy">Close</button>
    </div>
  </div>

  <script defer>
const GNEWS_KEY = '4348ae5aa7a4288e0166ca6706be5171';
const NEWSAPI_KEY = 'dc9995ffa5a14e7193692be515e9a71d';
const MAX_ARTICLES = 20;
const grid = document.getElementById('grid');
const statusEl = document.getElementById('status');
const errorEl = document.getElementById('error');
const fetchBtn = document.getElementById('fetchBtn');
const countryEl = document.getElementById('country');
const qEl = document.getElementById('q');

function el(tag, cls){const e=document.createElement(tag);if(cls)e.className=cls;return e;}
function formatDate(iso){try{return new Date(iso).toLocaleString();}catch{return iso;}}

async function fetchJSON(url){
  const proxyUrl = 'https://corsproxy.io/?' + encodeURIComponent(url);
  const res = await fetch(proxyUrl,{cache:"force-cache"});
  if(!res.ok) throw new Error(`HTTP ${res.status}`);
  return res.json();
}

async function loadNews(){
  grid.innerHTML=''; errorEl.style.display='none'; statusEl.textContent='Loading...';
  const country=countryEl.value, q=qEl.value.trim();
  let gnewsUrl=`https://gnews.io/api/v4/top-headlines?token=${GNEWS_KEY}&lang=en&max=${MAX_ARTICLES}`;
  if(country) gnewsUrl+=`&country=${country}`;
  if(q) gnewsUrl+=`&q=${encodeURIComponent(q)}`;
  try{
    const data=await fetchJSON(gnewsUrl);
    if(data.articles?.length){statusEl.textContent=`${data.articles.length} articles`; renderArticles(data.articles); return;}
  }catch(e){console.warn('GNews failed');}
  statusEl.textContent='Error loading news'; errorEl.style.display='block'; errorEl.textContent='Try again later.';
}

function renderArticles(articles){
  grid.innerHTML='';
  for(const a of articles){
    const card=el('article','card');
    const img=el('img','thumb');
    img.alt=a.title||'image'; img.loading='lazy';
    img.src=a.image||a.urlToImage||''; img.onerror=()=>img.remove();
    const c=el('div','content');
    const t=el('h3','title'); t.textContent=a.title||'No title';
    const d=el('p','desc'); d.textContent=a.description||'';
    const f=el('div','card-footer');
    f.innerHTML=`<span>${a.source?.name||'Source'} • ${formatDate(a.publishedAt)}</span>`;
    const btn=el('a','small-btn'); btn.href=a.url; btn.target='_blank'; btn.textContent='Read';
    f.appendChild(btn); c.append(t,d,f); card.append(img,c); grid.append(card);
  }
}

fetchBtn.addEventListener('click',loadNews);
window.addEventListener('load',loadNews);

// Privacy Modal
const modal=document.getElementById('privacyModal');
document.getElementById('privacyLink').onclick=e=>{e.preventDefault();modal.style.display='flex';};
document.getElementById('privacyFooter').onclick=e=>{e.preventDefault();modal.style.display='flex';};
document.getElementById('closePrivacy').onclick=()=>modal.style.display='none';
window.onclick=e=>{if(e.target===modal)modal.style.display='none';};
  </script>
</body>
</html>
